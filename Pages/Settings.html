<!DOCTYPE html>
<head>
   <title>Sign up for Wallet</title>
   <link rel="icon" href="../Assets/main-icon.png">
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
   <script src="../Assets/420eab8243.js" ></script>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');
   .centre
   {
   text-align: center;
   }
   .center{
   margin: auto;
   width: 30%;
   align-items: center;  
   padding: 10px;
   }   
   .rectangle {
   width: 200px;
   height: 100px;
   border: 1px solid black;
   text-align: center;
   display: inline-block;
   line-height: 50px;
   font-weight: bold;
   font-size: 20px;
   }
   .required::after {
   color: red;
   }
   
   *{
   list-style: none;
   text-decoration: none;
   margin: 0;
   padding: 0;
   box-sizing: border-box;
   font-family: 'Open Sans', sans-serif;
   }
   body{
   background: #f5f6fa;
   }
   .wrapper .sidebar{
   background: rgb(5, 68, 104);
   position: fixed;
   top: 0;
   left: 0;
   width: 225px;
   height: 100%;
   padding: 20px 0;
   transition: all 0.5s ease;
   }
   .wrapper .sidebar .profile{
   margin-bottom: 30px;
   text-align: center;
   }
   .wrapper .sidebar .profile img{
   display: block;
   width: 100px;
   height: 100px;
   border-radius: 50%;
   margin: 0 auto;
   }
   .wrapper .sidebar .profile h3{
   color: #ffffff;
   margin: 10px 0 5px;
   }
   .wrapper .sidebar .profile p{
   color: rgb(206, 240, 253);
   font-size: 14px;
   }
   .wrapper .sidebar ul li a{
   display: block;
   padding: 13px 30px;
   border-bottom: 1px solid;
   color: rgb(241, 237, 237);
   font-size: 16px;
   position: relative;
   }
   .wrapper .sidebar ul li a .icon{
   color: #dee4ec;
   width: 30px;
   display: inline-block;
   }
   .wrapper .sidebar ul li a:hover,
   .wrapper .sidebar ul li a.active{
   color: #0c7db1;
   background:white;
   border-right: 2px solid rgb(5, 68, 104);
   }
   .wrapper .sidebar ul li a:hover .icon,
   .wrapper .sidebar ul li a.active .icon{
   color: #0c7db1;
   }
   .wrapper .sidebar ul li a:hover:before,
   .wrapper .sidebar ul li a.active:before{
   display: block;
   }
   .collapsible {
   display: none;
   }
   .collapsible.active {
   display: block;
   }
   .collapsible-button {
   background-color: transparent;
   border: none;
   color: #000;
   font-size: 24px;
   cursor: pointer;
   position: absolute;
   top: 10px;
   left: 10px;
   }
   .pill-nav a {
  display: inline-block;
  color: black;
  text-align: center;
  padding: 14px;
  text-decoration: none;
  font-size: 17px;
  border-radius: 5px;
}

.pill-nav a:hover {
  background-color: #ddd;
  color: black;
}

.pill-nav a.active {
  background-color: dodgerblue;
  color: white;
}
</style>
<body>
   <header>
      <h1 class="centre">Welcome to Wallet</h1>
      <p class="centre">This app helps you manage all your financial transactions with ease</p>
      <p class="centre">Works with:-
      <li class="centre">Credit Cards</li>
      <li class="centre">Banks, Debit Cards</li>
      <li class="centre">Cash</li>
      </p>
      <p class="centre">The app is compatible with all devices that support the <i class="fa-solid fa-globe"></i> Web</p>
   </header>
   <button class="collapsible-button" id="coll-button">&#9776;</button>
   <div class="collapsible">
      <div class="wrapper">
         <!--Top menu -->
         <div class="sidebar">
            <button class="collapsible-button" id="dis-collapsible-button" style="color:white">&#9776;</button>
            <br>
            <div class="profile">
                <i class="fa-regular fa-user fa-2xl" style="color: #f7f9fd;"></i>
                <br>    
                <h3 id="name_ussser"></h3>
                <p id="user_name"></p>
                <br>
                <button onclick="logoutFunction()" id="logout_btn" style="visibility: hidden;">Logout</button>
            </div>
            <ul>
                <li>
                    <a href="/">
                        <span class="icon"><i class="fas fa-home"></i></span>
                        <span class="item">Home</span>
                    </a>
                </li>
                <li>
                    <a href="CreditCard.html">
                        <span class="icon"><i class="fa-regular fa-credit-card"></i></span>
                        <span class="item">Credit Cards</span>
                    </a>
                </li>
                <li>
                    <a href="Bank.html">
                        <span class="icon"><i class="fa-solid fa-building-columns"></i></span>
                        <span class="item">Banks</span>
                    </a>
                </li>
                <li>
                    <a href="Cash.html">
                        <span class="icon"><i class="fa-solid fa-sack-dollar"></i></span>
                        <span class="item">Cash</span>
                    </a>
                </li>
                <li>
                    <a href="Settings.html" class="active">
                        <span class="icon"><i class="fa-solid fa-gear"></i></span>
                        <span class="item">Settings</span>
                    </a>
                </li>

            </ul>
        </div>
      </div>
   </div>
   </div>
   <br>
   <form id="details_form" class="centre">
      <div class="pill-nav">
         <a class="active" onclick="personaloption()" id="personal_settings">Personal Settings</a>
         <a onclick="financialoption()" id="financial_settings">Financial Options</a>
         <a onclick="aboutoption()" id="about_settings">About</a>
         <a onclick="logoutoption()" id="logout_settings">Logout</a>
       </div>
       <div id="personalsettingsform">
         <h2>Manage your personal settings:</h2>
      <br>
      <label for="name_user">Name:</label>
      <input id="name_user" type="text">
      <br>
      <br>
      <label for="usernamee_entry">Username:</label>
      <input id="usernamee_entry" type="text">
      <br><br>
      <label for="password_user">Password:</label>
      <input id="password_user" type="password">
      <br><br>
      <p style="font-weight: bold;">Please note:-</p>
      <ul>
         <li>Ensure that you remember the username you entered, as it cannot be changed later</li>
         <li>Please ensure that you enter a strong password</li>
      </ul>

      <button onclick="submitName()">Submit</button>
      <br>
      <br>

       </div>
      
      
      
      <br>
      <div id="financialsettingsform">
         <h2 style="display:none;" id="add_details_1">Add a financial option</h2>
         <br>  
         <select style="display:none;" id="type_of_finance" onchange="change_option()">
            <option>Select a financial option</option>
            <option>Credit Cards</option>
            <option>Banks</option>
            <option>Cash</option>
         </select>
      </div>
      
      <div id="aboutform" style="display:none">
         <h2 style="display:none;" id="add_details_1">About</h2>
         <p>Wallet - The app designed and developed to keep track of your Cash, Bank, Debit Card and Credit Card Transactions</p>
         <br>
         <h3>Version 3.0</h3>
         <h3>You are running the latest version of Wallet!</h3>
         
         <br><br>
         <p>Developed by <a href="https://github.com/abhinavsatheesh">ASA Finserve</a></p>
         <p>A product of <a href="https://github.com/asafinserve">ASA Finserve</a></p>
         <p>Accounting, Working Capital and Treasury Solutions</p>
      </div>

      <div id="logoutform" style="display:none">
         <h2>Wallet Settings</h2>
         <br>
         <br>
         <button onclick="logoutFunction()" >Logout from this device</button>
         <br><br>
         <button onclick="del_data()">Delete data and logout</button>
         <br>
      </div>
   </form>
   <div class="centre" id="to_delete"></div>   </div>
   
</body>
<script src="../Assets/sweetalert.min.js"></script>
<script src="../Assets/functions.js"></script>
<script src="../Assets/localforage.js"></script>

<script>
   
   function loginPage()
   {
      event.preventDefault()
      window.location.href="Login.html"
   }
   function update(status_code, time)
   {
      if(status_code==204 || status_code==201)
      {
         localStorage.setItem("Wallet", dddd)
         localforage.setItem("Wallet", dddd, function(err, value){})
         if (time!="first")
         {
            alert("Changes made successfully")
            window.location.reload()
         }
         else
         {
            document.getElementById("financial_settings").classList.add("active")
            document.getElementById("personal_settings").classList.remove("active")
            document.getElementById("about_settings").classList.remove("active")
            document.getElementById("logout_settings").classList.remove("active")
            var personalDiv = document.getElementById("personalsettingsform");
            var otherDiv = document.getElementById("financialsettingsform");
            personalDiv.style.display = "none"; 
            otherDiv.style.display = "block";
            document.getElementById("name_user").value = localStorageGetItem("NameUser")
            document.getElementById("add_details_1").style.display = "block";
            document.getElementById("type_of_finance").style.display = "block";
         }
      }
   }
   function initialseset(data, d, typeed)
   {
      dddd = data

      if(typeed=="")
      {
         userName = JSON.parse(dddd)["user_id"]
         fetch(`https://nkafepwcnjcdvngvyrgz.supabase.co/rest/v1/UserData?user_id=eq.${userName}`, {
            method: "GET", // Specify the HTTP method
            headers: {
               "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your API key
               "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your access token
               "Content-Type": "application/json",
               "Prefer": "return=minimal",
            }
            })
         .then(response => {
         if (!response.ok) {
            throw new Error("Network response was not ok");
         }
         return response.json();
         })
         .then(addata => {
         if (addata.length==0)
         {
            fetch("https://nkafepwcnjcdvngvyrgz.supabase.co/rest/v1/UserData", {
               method: "POST",
               body: JSON.stringify({ "user_id": userName, "Details": dddd}),
               headers: {
               "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8",
               "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8",
               "Content-Type": "application/json",
               "Prefer": "return=minimal",
            }
            })
            .then((json) => update(json["status"], "first"))
            
         }
      else
      {
      alert("Sorry, that username is not available. Try another")
      window.location.reload()
  }
})

      }
      
   else
   {
      userName = JSON.parse(dddd)["user_id"]
      
         fetch(`https://nkafepwcnjcdvngvyrgz.supabase.co/rest/v1/UserData?user_id=eq.${userName}`, {
            method: 'PATCH',
            body: JSON.stringify({ "user_id": userName, "Details": dddd}),
            headers: {
               "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your API key
               "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your access token
               "Content-Type": "application/json",
               "Prefer": "return=minimal",
            },
            })
            .then((json) => update(json["status"]), "");
   }
}

   function setToStorage(data)
   {
      userName = JSON.parse(data)["user_id"]
      localStorage.setItem("Wallet", data)
      localforage.setItem("Wallet", data, function(err, value){})      
      fetch(`https://nkafepwcnjcdvngvyrgz.supabase.co/rest/v1/UserData?user_id=eq.${userName}`, {
      method: "PATCH",
      body: JSON.stringify({ "user_id": userName, "Details": data}),
      headers: {
      "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8",
      "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8",
      "Content-Type": "application/json",
      "Prefer": "return=minimal",
   }
   });
   }
   function localStorageGetItem(vallue)
   {
      return JSON.parse(localStorage.getItem("Wallet"))[vallue]
   }
    try{Notification.requestPermission().then((result) => {});}
    catch{}

    
   const collapsibleButton = document.querySelector('.collapsible-button');
   const menu = document.querySelector('.collapsible');
   
   collapsibleButton.addEventListener('click', () => {
   menu.classList.toggle('active');
   });
   
   
   const discollapisbleButton = document.getElementById("dis-collapsible-button");
   discollapisbleButton.addEventListener('click', () => {
   menu.classList.remove('active')
   });
   
creditcarddiv = document.createElement("div")
creditcarddiv.style.display="none"
creditcarddiv.id="creditcarddiv"
creditcarddiv.appendChild(document.createElement("br"))
var creditcard_entry = document.createElement("select")
creditcard_entry.id = "creditcard_entry"
var optionss = ["Credit Card Bank", "HDFC Bank", "SBI", "American Express", "ICICI Bank", "Axis Bank", "Citibank", "YES Bank", "SCB", "IndusInd Bank", "RBL Bank", "Bank of Baroda", "Vijaya Bank", "Allahabad Bank", "Andhra Bank", "Bajaj Finserv", "Bank of India", "Bank of Maharashtra", "Canara Bank", "Central Bank of India", "Federal Bank", "HSBC Bank", "IDFC Bank", "Kotak Mahindra Bank", "Others (Please specify)"]
for (var i = 0; i < optionss.length; i++) {
   var option = document.createElement("option");
   option.value = optionss[i];
   option.text = optionss[i];
   creditcard_entry.appendChild(option);
}
creditcard_entry.addEventListener("change", function(){
if(creditcard_entry.options[creditcard_entry.selectedIndex].text=="Others (Please specify)")
{
   vvv = prompt("Enter your credit card issuing bank")
}
})
var nickname_entry_card = document.createElement("input")
nickname_entry_card.id = "nickname_entry"
nickname_entry_card.placeholder = "Enter a nickname for your card"
nickname_entry_card.width = "150px"
nickname_entry_card.type = "text"
var spacer = document.createElement("br")
var due_date = document.createElement("select")
due_date.id = "due_date_checker"
var options = ["Payment Due Date?", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];
for (var i = 0; i < options.length; i++) {
   var option = document.createElement("option");
   option.value = options[i];
   option.text = options[i];
   due_date.appendChild(option);
}
creditcarddiv.appendChild(creditcard_entry)
creditcarddiv.appendChild(document.createElement("br"))
creditcarddiv.appendChild(document.createElement("br"))
creditcarddiv.appendChild(nickname_entry_card)
creditcarddiv.appendChild(document.createElement("br"))
creditcarddiv.appendChild(document.createElement("br"))
creditcarddiv.appendChild(due_date)
creditcarddiv.appendChild(document.createElement("br"))
var submit_btn = document.createElement("button")
submit_btn.id = "submit_btn"
submit_btn.innerHTML = "Add details"
submit_btn.addEventListener("click", function () {
   if (nickname_entry_card.value == "" || document.getElementById("creditcard_entry").options[document.getElementById("creditcard_entry").selectedIndex].text == "Credit Card Bank" || document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text == "Payment Due Date?") {
      swal("Please fill all the fields", "Please fill out all the fields - Nickname, Credit Card Name and Payment Due Date", "info");
   } else {
      try
      {
         document.getElementById("creditcard_entry").options[document.getElementById("creditcard_entry").selectedIndex].text=vvv
      }
      catch
      {
         
      }
      if (localStorageGetItem("CREDIT CARDS") == null) {
         objeee = new Object()
         objeee.NO_OF_CARDS = 1
         objeee.TRXNUM = 0
         strrr = `${document.getElementById("creditcard_entry").options[document.getElementById("creditcard_entry").selectedIndex].text} (${nickname_entry_card.value})`
         objeee.TRANSACTIONS = []
         oobb = new Object()
         todayDate = new Date()
         tempDate = new Date()
         tempDate.setDate(document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text)
         tempDate.setHours(0, 0, 0)
         if (todayDate >= tempDate) {
            tempDate.setMonth(tempDate.getMonth() + 1)
            oobb.DueDate = tempDate.toString()
         } else {
            oobb.DueDate = tempDate.toString()
         }
         oobb.BalanceOutstanding = 0
         objeee[strrr] = oobb
         data = JSON.parse(localStorage.getItem("Wallet"))
         data["CREDIT CARDS"]=objeee
         data["setup"]="DONE"
         setToStorage(JSON.stringify(data))
         if (localStorageGetItem("NameUser") == null) {
                  swal("Enter your name and username", "Please enter your name and username to proceed", "info")
               } else {
                  swal("Done", "Added successfully!", "success", {
                        buttons: {
                           ok: true,
                        },

                     })
                     .then((value) => {
                        switch (value) {

                           case "ok":
                              window.location.href = "/"
                              break;
                        }
                     });

               }
         


      } 
      else {
         oridata = JSON.parse(localStorage.getItem("Wallet"))
         data = localStorageGetItem("CREDIT CARDS")
         if (`${document.getElementById("creditcard_entry").options[document.getElementById("creditcard_entry").selectedIndex].text} (${nickname_entry_card.value})` in data) {
            swal("You already have a card with same bank and nickname", "To fix this issue, try typing some other nicknames", "error");
         } else {
            data["NO_OF_CARDS"] += 1
            oobb = new Object()
            todayDate = new Date()
            tempDate = new Date()
            tempDate.setDate(document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text)
            tempDate.setHours(0, 0, 0)
            if (todayDate >= tempDate) {
               tempDate.setMonth(tempDate.getMonth() + 1)
               oobb.DueDate = tempDate.toString()
            } else {
               oobb.DueDate = tempDate.toString()
            }
            oobb.BalanceOutstanding = 0
            data[`${document.getElementById("creditcard_entry").options[document.getElementById("creditcard_entry").selectedIndex].text} (${nickname_entry_card.value})`] = oobb
            oridata["CREDIT CARDS"]=data
            setToStorage(JSON.stringify(oridata))
            if (localStorageGetItem("NameUser") == null) {
                     swal("Enter your name and username", "Please enter your name and username to proceed", "info")
                  } else {
                     swal("Done", "Added successfully!", "success", {
                           buttons: {
                              ok: true,
                           },

                        })
                        .then((value) => {
                           switch (value) {

                              case "ok":
                                 window.location.href = "/"
                                 break;
                           }
                        });

                  }
         }
      }
   }

})
creditcarddiv.appendChild(spacer)
creditcarddiv.appendChild(submit_btn)
document.getElementById("to_delete").appendChild(creditcarddiv)

cashdiv=document.createElement("div")
cashdiv.id="cashdiv"
cashdiv.style.display="none"
var spacer = document.createElement("br")
var creditcard_entry = document.createElement("input")
creditcard_entry.id = "cash_entry"
creditcard_entry.placeholder = "Enter the amount of cash with you now"
var fff = document.createElement("div")
fff.id='noteCountInputs'
fff.style='display:block;'
fff.innerHTML="<input type='number' class='note-input' id='note500' placeholder='Count of ₹500 notes' />\
   <br><input type='number' class='note-input' id='note200' placeholder='Count of ₹200 notes' />\
  <br><input type='number' class='note-input' id='note100' placeholder='Count of ₹100 notes' />\
  <br><input type='number' class='note-input' id='note50' placeholder='Count of ₹50 notes' />\
  <br><input type='number' class='note-input' id='note20' placeholder='Count of ₹20 notes' />\
  <br><input type='number' class='note-input' id='note10' placeholder='Count of ₹10 coins' />\
  <br><input type='number' class='note-input' id='note5' placeholder='Count of ₹5 coins' />\
  <br><input type='number' class='note-input' id='note2' placeholder='Count of ₹2 coins' />\
  <br><input type='number' class='note-input' id='note1' placeholder='Count of ₹1 coins' />"
creditcard_entry.width = "150px"
creditcard_entry.type = "text"
var spacer = document.createElement("br")
cashdiv.appendChild(creditcard_entry)
cashdiv.appendChild(document.createElement("br"))
cashdiv.appendChild(document.createElement("br"))
cashdiv.appendChild(fff)
cashdiv.appendChild(document.createElement("br"))
cashdiv.appendChild(document.createElement("br"))
var submit_btn = document.createElement("button")
submit_btn.id = "submit_btn"
submit_btn.innerHTML = "Add details"
submit_btn.addEventListener("click", function () {
   if (document.getElementById("cash_entry").value == "") {
      swal("Please fill all the fields", "Please fill out the field of amount of cash with you", "info");
   } else {
      if (localStorageGetItem("CASH") != null) {
         swal("Warning", "This will overwrite your current cash balance and delete all your previous transactions recorded in Wallet. Continue?", "warning", {
               buttons: {
                  cancel: "No, stay here",
                  ok: true,
               },

            })
            .then((value) => {
               switch (value) {
                  case "ok":
                     objeee = new Object()
                     objeee.CASH_BALANCE = parseInt(document.getElementById("cash_entry").value)
                     noteCounts = {}
                     noteCounts['500'] = parseInt(document.getElementById('note500').value) || 0;
                     noteCounts['200'] = parseInt(document.getElementById('note200').value) || 0;
                     noteCounts['100'] = parseInt(document.getElementById('note100').value) || 0;
                     noteCounts['50'] = parseInt(document.getElementById('note50').value) || 0;
                     noteCounts['20'] = parseInt(document.getElementById('note20').value) || 0;
                     noteCounts['10'] = parseInt(document.getElementById('note10').value) || 0;
                     noteCounts['5'] = parseInt(document.getElementById('note5').value) || 0;
                     noteCounts['2'] = parseInt(document.getElementById('note2').value) || 0;
                     noteCounts['1'] = parseInt(document.getElementById('note1').value) || 0;
                     objeee.NOTE_COUNT = noteCounts
                     objeee.TRXNUM = 0
                     objeee.TRANSACTIONS = []
                     console.log(objeee)
                     data = JSON.parse(localStorage.getItem("Wallet"))
                     data["CASH"]=objeee
                     data["setup"]="DONE"
                     setToStorage(JSON.stringify(data))
                     swal("Done", "Added successfully!", "success", {
                           buttons: {
                              ok: true,
                           },

                        })
                        .then((value) => {
                           switch (value) {

                              case "ok":
                                 window.location.href = "/"
                                 break;

                           }
                        });
                     break;

                  case "cancel":
                     break;
               }
            });
      } else {
         oridata = JSON.parse(localStorage.getItem("Wallet"))
         objeee = new Object()
         objeee.CASH_BALANCE = parseInt(document.getElementById("cash_entry").value)
         noteCounts = {}
         noteCounts['500'] = parseInt(document.getElementById('note500').value) || 0;
         noteCounts['200'] = parseInt(document.getElementById('note200').value) || 0;
         noteCounts['100'] = parseInt(document.getElementById('note100').value) || 0;
         noteCounts['50'] = parseInt(document.getElementById('note50').value) || 0;
         noteCounts['20'] = parseInt(document.getElementById('note20').value) || 0;
         noteCounts['10'] = parseInt(document.getElementById('note10').value) || 0;
         noteCounts['5'] = parseInt(document.getElementById('note5').value) || 0;
         noteCounts['2'] = parseInt(document.getElementById('note2').value) || 0;
         noteCounts['1'] = parseInt(document.getElementById('note1').value) || 0;
         objeee.NOTE_COUNT = noteCounts
         objeee.TRXNUM = 0
         objeee.TRANSACTIONS = []
         console.log(objeee)
         oridata["CASH"]=objeee
         oridata["setup"]="DONE"
         setToStorage(JSON.stringify(oridata))
         if (localStorageGetItem("NameUser") == null) {
            swal("Enter your name and username", "Please enter your name and username to proceed", "info")
         } else {
            swal("Done", "Added successfully!", "success", {
                  buttons: {
                     ok: true,
                  },

               })
               .then((value) => {
                  switch (value) {

                     case "ok":
                        window.location.href = "/"
                        break;
                  }
               });
         }
      }
   }
})
cashdiv.appendChild(submit_btn)
document.getElementById("to_delete").appendChild(cashdiv)

bankdiv=document.createElement("div")
bankdiv.style.display="none"
bankdiv.id="bankdiv"
var spacer = document.createElement("br")
bankdiv.appendChild(spacer)
var creditcard_entry = document.createElement("select")
creditcard_entry.id = "bank_entry"
var optionss = ["Bank Account", "HDFC Bank", "SBI", "American Express", "ICICI Bank", "Axis Bank", "Citibank", "YES Bank", "SCB", "IndusInd Bank", "RBL Bank", "Bank of Baroda", "Vijaya Bank", "Allahabad Bank", "Andhra Bank", "Bajaj Finserv", "Bank of India", "Bank of Maharashtra", "Canara Bank", "Central Bank of India", "Federal Bank", "HSBC Bank", "IDFC Bank", "Kotak Mahindra Bank"]
for (var i = 0; i < optionss.length; i++) {
   var option = document.createElement("option");
   option.value = optionss[i];
   option.text = optionss[i];
   creditcard_entry.appendChild(option);
}
var nickname_entry_bank = document.createElement("input")
nickname_entry_bank.id = "nickname_entry"
nickname_entry_bank.placeholder = "Enter a nickname for your bank account"
nickname_entry_bank.width = "150px"
nickname_entry_bank.type = "text"
var balance_entry = document.createElement("input")
balance_entry.id = "balance_entry"
balance_entry.placeholder = "Enter your bank balance"
balance_entry.width = "150px"
balance_entry.type = "number"
var spacer = document.createElement("br")
bankdiv.appendChild(creditcard_entry)
bankdiv.appendChild(document.createElement("br"))
bankdiv.appendChild(document.createElement("br"))
bankdiv.appendChild(nickname_entry_bank)
bankdiv.appendChild(document.createElement("br"))
bankdiv.appendChild(document.createElement("br"))
bankdiv.appendChild(balance_entry)
bankdiv.appendChild(document.createElement("br"))
var submit_btn = document.createElement("button")
submit_btn.id = "submit_btn"
submit_btn.innerHTML = "Add details"
submit_btn.addEventListener("click", function () {
   if (nickname_entry_bank.value == "" || document.getElementById("bank_entry").options[document.getElementById("bank_entry").selectedIndex].text == "Bank Account" || balance_entry.value == "") {
      swal("Please fill all the fields", "Please fill out all the fields - Nickname, Bank Name and Balance in bank", "info");
   } else {
      if (localStorageGetItem("BANKS") == null) {
         objeee = new Object()
         objeee.NO_OF_BANKACCOUNTS = 1
         objeee.TRXNUM = 0
         strrr = `${document.getElementById("bank_entry").options[document.getElementById("bank_entry").selectedIndex].text} (${nickname_entry_bank.value})`
         objeee[strrr] = parseFloat(balance_entry.value)
         objeee.TRANSACTIONS = []
         data = JSON.parse(localStorage.getItem("Wallet"))
         data["BANKS"]=objeee
         data["setup"]="DONE"
         setToStorage(JSON.stringify(data))
         if (localStorageGetItem("NameUser") == null) {
            swal("Enter your name and username", "Please enter your name and username to proceed", "info")
         } else {
            swal("Done", "Added successfully!", "success", {
                  buttons: {
                     ok: true,
                  },

               })
               .then((value) => {
                  switch (value) {

                     case "ok":
                        window.location.href = "/"
                        break;

                  }
               });
         }

      } else {
         oridata = JSON.parse(localStorage.getItem("Wallet"))
         data = localStorageGetItem("BANKS")
         if (`${creditcard_entry.options[creditcard_entry.selectedIndex].text} (${nickname_entry_bank.value})` in data) {
            swal("You already have a bank with same nickname", "To fix this issue, try typing some other nicknames", "error");

         } else {
            data["NO_OF_BANKACCOUNTS"] += 1
            data[`${creditcard_entry.options[creditcard_entry.selectedIndex].text} (${nickname_entry_bank.value})`] = parseFloat(balance_entry.value)
            oridata["BANKS"]=data
            oridata["setup"]="DONE"
            setToStorage(JSON.stringify(oridata))

            if (localStorageGetItem("NameUser") == null) {
               swal("Enter your name and username", "Please enter your name and username to proceed", "info")
            } else {
               swal("Done", "Added successfully!", "success", {
                     buttons: {
                        ok: true,
                     },

                  })
                  .then((value) => {
                     switch (value) {

                        case "ok":
                           window.location.href = "/"
                           break;

                     }
                  });
            }

         }
      }
   }
})
bankdiv.appendChild(spacer)
bankdiv.appendChild(submit_btn)
document.getElementById("to_delete").appendChild(bankdiv)
</script>
<script>
   function aboutoption()
   {
      document.getElementById("about_settings").classList.add("active")
      document.getElementById("logout_settings").classList.remove("active")
      document.getElementById("financial_settings").classList.remove("active")
      document.getElementById("personal_settings").classList.remove("active")
      var personalDiv = document.getElementById("personalsettingsform");
      var otherDiv = document.getElementById("financialsettingsform");
      var aboutdiv = document.getElementById("aboutform");
      var logoutdiv = document.getElementById("logoutform");
      logoutdiv.style.display="none"
      aboutdiv.style.display = "block";
      otherDiv.style.display = "none";
      personalDiv.style.display = "none";
   }
   function personaloption()
   {
      document.getElementById("about_settings").classList.remove("active")
      document.getElementById("logout_settings").classList.remove("active")
      document.getElementById("financial_settings").classList.remove("active")
      document.getElementById("personal_settings").classList.add("active")
      var personalDiv = document.getElementById("personalsettingsform");
      var otherDiv = document.getElementById("financialsettingsform");
      var logoutdiv = document.getElementById("logoutform");
      var aboutdiv = document.getElementById("aboutform");
      personalDiv.style.display = "block";
      logoutdiv.style.display="none"
      otherDiv.style.display = "none";
      aboutdiv.style.display="none"
   }
   function logoutoption()
   {
      if(localStorage.getItem("Wallet")!=null)
      {
         document.getElementById("about_settings").classList.remove("active")
         document.getElementById("logout_settings").classList.add("active")
         document.getElementById("financial_settings").classList.remove("active")
         document.getElementById("personal_settings").classList.remove("active")
         var personalDiv = document.getElementById("personalsettingsform");
         var otherDiv = document.getElementById("financialsettingsform");
         var logoutdiv = document.getElementById("logoutform");
         var aboutdiv = document.getElementById("aboutform");
         personalDiv.style.display = "none";
         logoutdiv.style.display="block"
         otherDiv.style.display = "none";
         aboutdiv.style.display="none"
      }

   }
   function financialoption()
   {
      if(urlparams!="")
      {
         
      }
      else
      {
         if (localStorageGetItem("NameUser") != null) {
            var personalDiv = document.getElementById("personalsettingsform");
            var logoutdiv = document.getElementById("logoutform");
            var aboutdiv = document.getElementById("aboutform");
              var otherDiv = document.getElementById("financialsettingsform");
              document.getElementById("financial_settings").classList.add("active")
              document.getElementById("personal_settings").classList.remove("active")
              document.getElementById("about_settings").classList.remove("active")
               document.getElementById("logout_settings").classList.remove("active")
              personalDiv.style.display = "none";
            otherDiv.style.display = "block";
            logoutdiv.style.display="none"
            aboutdiv.style.display="none"
         document.getElementById("add_details_1").style.display = "block";
         document.getElementById("type_of_finance").style.display = "block";
      }
         
      }
   }
   if (localStorage.getItem("Wallet") != null) {
      document.getElementById("name_user").value = localStorageGetItem("NameUser") 
      document.getElementById("logout_btn").style.visibility="visible"
   document.getElementById("name_ussser").innerHTML = localStorageGetItem("NameUser")
   document.getElementById("usernamee_entry").value = localStorageGetItem("user_id")  
   document.getElementById("usernamee_entry").disabled=true
   document.getElementById("user_name").innerHTML = localStorageGetItem("user_id")
   document.getElementById("password_user").value = localStorageGetItem("password_user")  
}


   var urlparams = window.location.search
   if(urlparams=="")
   {
      
   }
   else
   {  
      var aboutdiv = document.getElementById("aboutform");
      var personalDiv = document.getElementById("personalsettingsform");
      var logoutdiv = document.getElementById("logoutform");
      var otherDiv = document.getElementById("financialsettingsform");
      document.getElementById("financial_settings").classList.add("active")
      document.getElementById("personal_settings").classList.remove("active")
      personalDiv.style.display = "none";
      aboutdiv.style.display="none"
      var logoutdiv = document.getElementById("logoutform");
      otherDiv.style.display = "block";      
      document.getElementById("name_user").value = localStorageGetItem("NameUser") 
      type=(urlparams.split("?")[1]).split("=")[0]
      tod = (urlparams.split("?")[1]).split("=")[1]
      var spacer = document.createElement("br")
      if(type=="modify")
      {
         ti = tod.split("&")[0]
         ins = tod.split("&")[1]
         if(ti=="CC")
         {  
            creditcard = ins.replace(/%20/g, ' ');  
         document.getElementById("add_details_1").style.display = "block";
         document.getElementById("add_details_1").innerHTML="Edit Credit Card"
         var creditcard_entry = document.createElement("select")
         creditcard_entry.id = "creditcard_entry"
         var optionss = ["Credit Card Bank", "HDFC Bank", "SBI", "American Express", "ICICI Bank", "Axis Bank", "Citibank", "YES Bank", "SCB", "IndusInd Bank", "RBL Bank", "Bank of Baroda", "Vijaya Bank", "Allahabad Bank", "Andhra Bank", "Bajaj Finserv", "Bank of India", "Bank of Maharashtra", "Canara Bank", "Central Bank of India", "Federal Bank", "HSBC Bank", "IDFC Bank", "Kotak Mahindra Bank"]
         for (var i = 0; i < optionss.length; i++) {
            var option = document.createElement("option");
            option.value = optionss[i];
            option.text = optionss[i];
            creditcard_entry.appendChild(option);
         }
         var nickname_entry = document.createElement("input")
         nickname_entry.id = "nickname_entry"
         nickname_entry.placeholder = "Enter a nickname for your card"
         nickname_entry.width = "150px"
         nickname_entry.type = "text"
         var spacer = document.createElement("br")
         var due_date = document.createElement("select")
         due_date.id = "due_date_checker_modify"
         var options = ["Monthly Billing Date?", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];
         for (var i = 0; i < options.length; i++) {
            var option = document.createElement("option");
            option.value = options[i];
            option.text = options[i];
            due_date.appendChild(option);
         }
         var nickname = creditcard.substring(creditcard.indexOf("(") + 1, creditcard.lastIndexOf(")"))
         sss =(creditcard.replace(`(${nickname})`, "")).trim()
         document.getElementById("to_delete").appendChild(creditcard_entry)
         creditcard_entry.value=sss
         document.getElementById("to_delete").appendChild(spacer)
         document.getElementById("to_delete").appendChild(nickname_entry)
         nickname_entry.value=nickname
         document.getElementById("to_delete").appendChild(spacer)
         document.getElementById("to_delete").appendChild(due_date)
         dde = localStorageGetItem("CREDIT CARDS")
         datedue = new Date(dde[creditcard].DueDate)
         dd = datedue.getDate()
         due_date.value=dd
         var submit_btn = document.createElement("button")
         submit_btn.id = "submit_btn"
         submit_btn.innerHTML = "Modify details"
         submit_btn.addEventListener("click", function () {
            if (nickname_entry.value == "" || creditcard_entry.options[creditcard_entry.selectedIndex].text == "Credit Card Bank" || document.getElementById("due_date_checker").options[document.getElementById("due_date_checker").selectedIndex].text == "Monthly Billing Date?") {
               swal("Please fill all the fields", "Please fill out all the fields - Nickname, Credit Card Name and Monthly Bill Date", "info");
            } else {
               dde[`${creditcard_entry.value} (${nickname_entry.value})`]=dde[creditcard]
               if (`${creditcard_entry.value} (${nickname_entry.value})`!=creditcard)
               {
                  delete dde[creditcard]
               }
               todayDate = new Date()
               tempDate = new Date()
               tempDate.setDate(document.getElementById("due_date_checker_modify").options[document.getElementById("due_date_checker_modify").selectedIndex].text)
               tempDate.setHours(0, 0, 0)
               if (todayDate >= tempDate) {
                  tempDate.setMonth(tempDate.getMonth() + 1)
                  dde[`${creditcard_entry.value} (${nickname_entry.value})`]["DueDate"] = tempDate.toString()
               }
               else {
                  dde[`${creditcard_entry.value} (${nickname_entry.value})`]["DueDate"] = tempDate.toString()
               }
               transactions = dde.TRANSACTIONS
               for (let i = 0; i < transactions.length; i++) {
                  if (transactions[i].CreditCard === creditcard) {
                     transactions[i].CreditCard = `${creditcard_entry.value} (${nickname_entry.value})`;
                  }
               }  
               oridata = JSON.parse(localStorage.getItem("Wallet"))
               oridata["CREDIT CARDS"]=dde
               setToStorage(JSON.stringify(oridata))
               alert("Modified card details successfully!")
               history.back()
         }})
         document.getElementById("to_delete").appendChild(spacer)
         document.getElementById("to_delete").appendChild(submit_btn)
         document.getElementById("to_delete").appendChild(spacer)
         var del_btn = document.createElement("button")
         del_btn.id = "del_btn"
         del_btn.innerHTML = "Delete Card"
         del_btn.addEventListener("click", function(){
            if(confirm("Warning! Do you wish to delete this card?"))
            {
               for (let i = 0; i < dde.TRANSACTIONS.length; i++) {
                  if (dde.TRANSACTIONS[i].CreditCard === creditcard) {
                     dde.TRANSACTIONS.splice(i, 1);
                  }
                }  
               delete dde[creditcard]
               dde.NO_OF_CARDS-=1
               oridata = JSON.parse(localStorage.getItem("Wallet"))
               if (dde.NO_OF_CARDS==0)
               {
                  delete oridata["CREDIT CARDS"]
               }
               else
               {
                  oridata["CREDIT CARDS"]=dde
               }
               setToStorage(JSON.stringify(oridata))
               alert("Deleted card successfully!")
               history.back()
          }
         })
         document.getElementById("to_delete").appendChild(del_btn)
         }
         else
         {
            creditcard = ins.replace(/%20/g, ' ');
         document.getElementById("add_details_1").style.display = "block";
         document.getElementById("add_details_1").innerHTML="Edit Bank Account"
         var spacer = document.createElement("br")
         var creditcard_entry = document.createElement("select")
         creditcard_entry.id = "creditcard_entry"
         var optionss = ["Bank Account", "HDFC Bank", "SBI", "American Express", "ICICI Bank", "Axis Bank", "Citibank", "YES Bank", "SCB", "IndusInd Bank", "RBL Bank", "Bank of Baroda", "Vijaya Bank", "Allahabad Bank", "Andhra Bank", "Bajaj Finserv", "Bank of India", "Bank of Maharashtra", "Canara Bank", "Central Bank of India", "Federal Bank", "HSBC Bank", "IDFC Bank", "Kotak Mahindra Bank"]
         for (var i = 0; i < optionss.length; i++) {
            var option = document.createElement("option");
            option.value = optionss[i];
            option.text = optionss[i];
            creditcard_entry.appendChild(option);
         }
      var nickname_entry = document.createElement("input")
      nickname_entry.id = "nickname_entry"
      nickname_entry.placeholder = "Enter a nickname for your bank"
      nickname_entry.width = "150px"
      nickname_entry.type = "text"
      var spacer = document.createElement("br")
      var nickname = creditcard.substring(creditcard.indexOf("(") + 1, creditcard.lastIndexOf(")"))
      sss =(creditcard.replace(`(${nickname})`, "")).trim()
      document.getElementById("to_delete").appendChild(creditcard_entry)
      creditcard_entry.value=sss
      document.getElementById("to_delete").appendChild(spacer)
      document.getElementById("to_delete").appendChild(nickname_entry)
      nickname_entry.value=nickname
      document.getElementById("to_delete").appendChild(spacer)
      ddddd = localStorageGetItem("BANKS")
      balance = ddddd[creditcard]
      var submit_btn = document.createElement("button")
      submit_btn.id = "submit_btn"
      submit_btn.innerHTML = "Modify details"
      submit_btn.addEventListener("click", function () {
         if (nickname_entry.value == "" || creditcard_entry.value == "" ) {
            swal("Please fill all the fields", "Please fill out all the fields - Nickname and Bank Name", "info");
         } else {
            let newKey=creditcard_entry.value
            vflkvkrv = ddddd[creditcard]
            ddddd[`${creditcard_entry.value} (${nickname_entry.value})`]=vflkvkrv
            delete ddddd[creditcard]
            transactions = ddddd.TRANSACTIONS
            for (let i = 0; i < transactions.length; i++) {
               if (transactions[i].BankAccount === creditcard) {
                  transactions[i].BankAccount = `${creditcard_entry.value} (${nickname_entry.value})`;
               }
            }  
            oridata = JSON.parse(localStorage.getItem("Wallet"))
            oridata["BANKS"]=ddddd
            setToStorage(JSON.stringify(oridata))
            alert("Modified bank details successfully!")
            history.back()
         }})
         document.getElementById("to_delete").appendChild(spacer)
         document.getElementById("to_delete").appendChild(submit_btn)
         document.getElementById("to_delete").appendChild(spacer)
         var del_btn = document.createElement("button")
         del_btn.id = "del_btn"
         del_btn.innerHTML = "Delete Bank"
         del_btn.addEventListener("click", function(){
            if(confirm("Warning! Do you wish to delete this bank?"))
            {
               for (let i = 0; i < ddddd.TRANSACTIONS.length; i++) {
                  if (ddddd.TRANSACTIONS[i].CreditCard === creditcard) {
                     ddddd.TRANSACTIONS.splice(i, 1);
                  }
                }  
               delete ddddd[creditcard]
               ddddd.NO_OF_BANKACCOUNTS-=1
               oridata=JSON.parse(localStorage.getItem("Wallet"))
               if(ddddd.NO_OF_BANKACCOUNTS==0)
               {
                  delete oridata["BANKS"]
               }
               else
               {
                  oridata["BANKS"]=ddddd
               }
               setToStorage(JSON.stringify(oridata))
               alert("Deleted bank successfully!")
               history.back()
            }
         })
         document.getElementById("to_delete").appendChild(del_btn)
         }
      }
      else if (type=="addType")
      {
         if(tod=="CC")
         {
            document.getElementById("add_details_1").style.display = "block";
            document.getElementById("add_details_1").innerHTML="Add Credit Card"
               creditcarddiv.style.display="block"
         }
         else if(tod=="B")
         {
            document.getElementById("add_details_1").style.display = "block";
               document.getElementById("add_details_1").innerHTML="Add Bank Account"
               bankdiv.style.display="block"
         }
         else
         {
            document.getElementById("add_details_1").style.display = "block";
               document.getElementById("add_details_1").innerHTML="Add Cash Account"
            cashdiv.style.display="block"
         }
      }       
}



function del_data() {
   event.preventDefault()
   swal("Warning", "Are you sure you wish to delete all the data stored on the device? Doing so, will log you out!", "warning", {
         buttons: {
            cancel: "Cancel",
            ok: true,
         },

      })
      .then((value) => {
         switch (value) {

            case "ok":
                  data = JSON.parse(localStorage.getItem("Wallet"))
                  userName = data["user_id"]
                  localStorage.removeItem("Wallet")
                  localforage.removeItem("Wallet", function(err, value){})
                  fetch(`https://nkafepwcnjcdvngvyrgz.supabase.co/rest/v1/UserData?user_id=eq.${userName}`, {
                  method: "DELETE", // Specify the HTTP method
                  headers: {
                     "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your API key
                     "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your access token
                     "Content-Type": "application/json",
                     "Prefer": "return=minimal",
                  }
                  })
                  .then(res => res.text())
                  .then(res => {if (res==""){
                     window.location.reload()
               }})
                  // 
               
               break;

            case "cancel":
               break;
         }
      });

}

function submitName() {
   event.preventDefault();
   if (name_user.value == "" || usernamee_entry.value=="" || password_user.value=="") {
      swal("Enter your name, a username and a password", "Please enter your name, a username and a password to proceed", "info");
   } else {
      var personalDiv = document.getElementById("personalsettingsform");
      var otherDiv = document.getElementById("financialsettingsform");
      var logoutdiv = document.getElementById("logoutform");
      data = {"NameUser":name_user.value, "user_id":usernamee_entry.value, "password_user":password_user.value}
      if(localStorage.getItem("Wallet")==null)
      {
         initialseset(JSON.stringify(data), "", "")
         
      }
      else
      {
         ttt = JSON.parse(localStorage.getItem("Wallet"))
         ori=ttt["user_id"]
         ttt['NameUser']=name_user.value
         ttt["user_id"]=usernamee_entry.value
         ttt["password_user"]=password_user.value
         initialseset(JSON.stringify(ttt), ori, "modify")
      }
      
   }

}



function change_option() {
   var x = document.getElementById("type_of_finance").value;
   if (x == "Select a financial option") {
      swal("Select an option", "Please select a financial option to begin with", "info");
      document.getElementById("to_delete").replaceChildren()

   } else if (x == "Credit Cards") {
      cashdiv.style.display="none"
      creditcarddiv.style.display="block"
      bankdiv.style.display="none"
   } else if (x == "Cash") {
      cashdiv.style.display="block"
      creditcarddiv.style.display="none"
      bankdiv.style.display="none"
   } else if (x == "Banks") {
      cashdiv.style.display="none"
      creditcarddiv.style.display="none"
      bankdiv.style.display="block"
   }
}

try
{
   data = JSON.parse(localStorage.getItem("Wallet"))
    userName = data["user_id"]
    fetch(`https://nkafepwcnjcdvngvyrgz.supabase.co/rest/v1/UserData?user_id=eq.${userName}`, {
  method: "GET", // Specify the HTTP method
  headers: {
    "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your API key
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rYWZlcHdjbmpjZHZuZ3Z5cmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTMyMjk4NTgsImV4cCI6MjAwODgwNTg1OH0.N0WVNuW3S-6Fa6sgMfnLcvORYk7oawfEeUAdJ-IUCH8", // Replace with your access token
    "Content-Type": "application/json",
    "Prefer": "return=minimal",
  }
})
.then(response => {
  if (!response.ok) {
    throw new Error("Network response was not ok");
  }
  return response.json();
})
.then(addata => {
    tocheck = JSON.parse(addata[0]["Details"])
    if(deepEqual(tocheck, data)==true)
    {
        
    } 
    else
    {
      //   localStorage.setItem("Wallet", JSON.stringify(tocheck))
      //   localforage.setItem("Wallet", JSON.stringify(tocheck), function(err, value){})
      //   window.location.reload()
    }
})    
}
catch
{}
</script>
</html>
